@isTest
private class UpdateMyCountTriggerTest {
    private static final String CLASS_NAME='10 A';
    private static final String STUDENT_NAME='Test Student';
    private static final String SEX_MALE='Male';
    
    @isTest
    private static void insertStudentTest(){
        Class__c classObj= new Class__c(Name=CLASS_NAME, Max_Size__c=100);
        insert classObj;
        
        List<Student__c> studentObjList= new List<Student__c>();
        for(Integer counter=0; counter<100; counter++){
            studentObjList.add(new Student__c(Name=STUDENT_NAME+' '+counter, Sex__c=SEX_MALE, Class__c=classObj.Id));
        }
        
        Test.startTest();
        insert studentObjList;
        Test.stopTest();
        
        List<Class__c> classObjList=[SELECT Id, Mycount__c FROM Class__c WHERE Name =: CLASS_NAME];
        System.assertEquals(100, classObjList[0].Mycount__c);
    }
    
    @isTest
    private static void updateStudentTest(){
        Class__c classObj= new Class__c(Name=CLASS_NAME, Max_Size__c=100);
        insert classObj; 
        
        List<Student__c> studentObjList= new List<Student__c>();     
        for(Integer counter=0; counter<100; counter++){
            studentObjList.add(new Student__c(Name=STUDENT_NAME+' '+counter, Sex__c=SEX_MALE, Class__c=classObj.Id));
        }
        insert studentObjList;
        
        for(Student__c studentObj : studentObjList){
            studentObj.Married__c = false;
        }
        
        Test.startTest();
        update studentObjList;
        Test.stopTest();
        
        List<Class__c> classObjList=[SELECT Id, Mycount__c FROM Class__c WHERE Name =: CLASS_NAME];
        System.assertEquals(100, classObjList[0].Mycount__c);
    }
}